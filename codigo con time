import threading
import time

# Sincronización con Lock para la única plancha
plancha = threading.Lock()

def preparar_pedido(nombre_pedido, tiempo_necesario):
    # Inicio del hilo
    print(f"Pedido recibido: {nombre_pedido} (Requiere {tiempo_necesario}s)")
    
    # El cocinero espera su turno para la plancha
    with plancha:
        inicio_coccion = time.perf_counter()
        print(f"--- Entrando a la plancha: {nombre_pedido} ---")
        
        # Simulamos la preparación con el tiempo asignado
        time.sleep(tiempo_necesario)
        
        fin_coccion = time.perf_counter()
        print(f"--- Terminado en plancha: {nombre_pedido} (Tardo: {fin_coccion - inicio_coccion:.2f}s) ---")

    print(f"Pedido completado y listo para servir: {nombre_pedido}")

if __name__ == "__main__":
    # Definimos pedidos con diferentes tiempos de cocción
    pedidos = [
        ("Hamburguesa", 3),
        ("Perrito", 1),
        ("Sandwich", 2)
    ]
    
    inicio_total = time.perf_counter()
    hilos = []

    # Crear e iniciar hilos
    for nombre, tiempo in pedidos:
        hilo = threading.Thread(target=preparar_pedido, args=(nombre, tiempo))
        hilos.append(hilo)
        hilo.start()

    # Esperar a que todos terminen
    for hilo in hilos:
        hilo.join()

    fin_total = time.perf_counter()
    
    print("\n" + "="*40)
    print(f"TODOS LOS PEDIDOS COMPLETADOS")
    print(f"Tiempo total de la cocina: {fin_total - inicio_total:.2f} segundos")
    print("="*40)